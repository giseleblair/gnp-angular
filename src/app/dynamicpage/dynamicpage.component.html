<main class="min-h-screen bg-gradient-to-br from-slate-50 via-white to-amber-50 px-6 py-16">
  <div class="mx-auto rounded-3xl bg-white/80 p-4 shadow-xl shadow-slate-900/5">
    <p class="text-xs uppercase tracking-[0.3em] text-slate-500">
      Dynamic Page
    </p>
    <h1 class="mt-4 text-3xl font-semibold text-slate-900 sm:text-4xl">
      {{ path$ | async }}
    </h1>

    <div *ngIf="data$ | async as data; else loading" class="mt-8">
      <app-pages
        *ngIf="data?.meta?.model_name === 'pages'; else freestylePayload"
        [page]="data"
      ></app-pages>
      <ng-template #freestylePayload>
        <app-freestyle-example
          *ngIf="
            data?.meta?.model_name === 'freestyle_example';
            else genericPayload
          "
        ></app-freestyle-example>
      </ng-template>
      <ng-template #genericPayload>
        <p class="text-xs uppercase tracking-[0.2em] text-slate-400">
          JSON payload
        </p>
        <pre
          class="mt-3 max-h-96 overflow-auto rounded-2xl bg-slate-900 p-6 text-xs text-slate-100"
        >{{ data | json }}</pre>
      </ng-template>
    </div>

    <ng-template #loading>
      <div class="mt-8 space-y-3">
        <div class="h-4 w-1/3 animate-pulse rounded bg-slate-200"></div>
        <div class="h-36 animate-pulse rounded-2xl bg-slate-200"></div>
      </div>
      <p *ngIf="errorMessage" class="mt-6 text-sm font-semibold text-rose-600">
        {{ errorMessage }}
      </p>
    </ng-template>
  </div>
</main>
